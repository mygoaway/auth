# WebAuthn/Passkey ì¸ì¦ ì‹œìŠ¤í…œ ë¬¸ì„œ

## ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
4. [ë°ì´í„° ëª¨ë¸](#ë°ì´í„°-ëª¨ë¸)
5. [API ì—”ë“œí¬ì¸íŠ¸](#api-ì—”ë“œí¬ì¸íŠ¸)
6. [íŒ¨ìŠ¤í‚¤ ë“±ë¡ í”Œë¡œìš°](#íŒ¨ìŠ¤í‚¤-ë“±ë¡-í”Œë¡œìš°)
7. [íŒ¨ìŠ¤í‚¤ ë¡œê·¸ì¸ í”Œë¡œìš°](#íŒ¨ìŠ¤í‚¤-ë¡œê·¸ì¸-í”Œë¡œìš°)
8. [íŒ¨ìŠ¤í‚¤ ê´€ë¦¬](#íŒ¨ìŠ¤í‚¤-ê´€ë¦¬)
9. [Redis ì±Œë¦°ì§€ ì €ìž¥ì†Œ](#redis-ì±Œë¦°ì§€-ì €ìž¥ì†Œ)
10. [ë³´ì•ˆ ì„¤ê³„](#ë³´ì•ˆ-ì„¤ê³„)
11. [ì—ëŸ¬ ì²˜ë¦¬](#ì—ëŸ¬-ì²˜ë¦¬)
12. [í”„ë¡ íŠ¸ì—”ë“œ UI](#í”„ë¡ íŠ¸ì—”ë“œ-ui)
13. [ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ ì—°ë™](#ë³´ì•ˆ-ëŒ€ì‹œë³´ë“œ-ì—°ë™)
14. [í…ŒìŠ¤íŠ¸](#í…ŒìŠ¤íŠ¸)
15. [í™˜ê²½ ë³€ìˆ˜](#í™˜ê²½-ë³€ìˆ˜)
16. [ë°°í¬ ê°€ì´ë“œ](#ë°°í¬-ê°€ì´ë“œ)

---

## ê°œìš”

WebAuthn(Web Authentication)ì€ FIDO2 í‘œì¤€ ê¸°ë°˜ì˜ ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ì¸ì¦ ë°©ì‹ì´ë‹¤. ì‚¬ìš©ìžëŠ” ìƒì²´ì¸ì¦(ì§€ë¬¸, ì–¼êµ´ ì¸ì‹), í•˜ë“œì›¨ì–´ ë³´ì•ˆ í‚¤, ë˜ëŠ” ê¸°ê¸° PINì„ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸í•  ìˆ˜ ìžˆë‹¤.

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” **Passkey(íŒ¨ìŠ¤í‚¤)**ë¥¼ í™œìš©í•œ ì¸ì¦ì„ êµ¬í˜„í•˜ë©°, ë‹¤ìŒ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤:

- ì¸ì¦ëœ ì‚¬ìš©ìžì˜ íŒ¨ìŠ¤í‚¤ ë“±ë¡ (ì‚¬ìš©ìžë‹¹ ìµœëŒ€ 10ê°œ)
- íŒ¨ìŠ¤í‚¤ë¥¼ ì‚¬ìš©í•œ ë¹„ë°€ë²ˆí˜¸ ì—†ëŠ” ë¡œê·¸ì¸ (Discoverable Credentials)
- ë“±ë¡ëœ íŒ¨ìŠ¤í‚¤ ëª©ë¡ ì¡°íšŒ, ì´ë¦„ ë³€ê²½, ì‚­ì œ

---

## ê¸°ìˆ  ìŠ¤íƒ

| êµ¬ë¶„ | ê¸°ìˆ  | ì„¤ëª… |
|------|------|------|
| ë°±ì—”ë“œ ë¼ì´ë¸ŒëŸ¬ë¦¬ | webauthn4j-core 0.28.4 | WebAuthn ê²€ì¦ ì—”ì§„ |
| ì±Œë¦°ì§€ ì €ìž¥ì†Œ | Redis | 5ë¶„ TTLë¡œ ì¼íšŒì„± ì±Œë¦°ì§€ ì €ìž¥ |
| í† í° ë°œê¸‰ | jjwt 0.12.6 | ë¡œê·¸ì¸ ì„±ê³µ ì‹œ JWT ë°œê¸‰ |
| í”„ë¡ íŠ¸ì—”ë“œ | Web Authentication API | ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ API (ë³„ë„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ìŒ) |

**Gradle ì˜ì¡´ì„±:**

```gradle
implementation 'com.webauthn4j:webauthn4j-core:0.28.4.RELEASE'
```

**í”„ë¡ íŠ¸ì—”ë“œ:** ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ API(`navigator.credentials.create()`, `navigator.credentials.get()`)ë¥¼ ì§ì ‘ ì‚¬ìš©í•œë‹¤.

---

## ì•„í‚¤í…ì²˜

### ë°±ì—”ë“œ íŒŒì¼ êµ¬ì¡°

```
src/main/java/com/jay/auth/
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ PasskeyController.java          # API ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
â”œâ”€â”€ service/
â”‚   â””â”€â”€ PasskeyService.java             # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”œâ”€â”€ domain/entity/
â”‚   â””â”€â”€ UserPasskey.java                # JPA ì—”í‹°í‹°
â”œâ”€â”€ repository/
â”‚   â””â”€â”€ UserPasskeyRepository.java      # ë°ì´í„° ì ‘ê·¼ ê³„ì¸µ
â”œâ”€â”€ dto/request/
â”‚   â”œâ”€â”€ PasskeyRegisterRequest.java     # ë“±ë¡ ê²€ì¦ ìš”ì²­
â”‚   â”œâ”€â”€ PasskeyAuthenticateRequest.java # ë¡œê·¸ì¸ ê²€ì¦ ìš”ì²­
â”‚   â””â”€â”€ PasskeyRenameRequest.java       # ì´ë¦„ ë³€ê²½ ìš”ì²­
â”œâ”€â”€ dto/response/
â”‚   â”œâ”€â”€ PasskeyRegistrationOptionsResponse.java   # ë“±ë¡ ì˜µì…˜ ì‘ë‹µ
â”‚   â”œâ”€â”€ PasskeyAuthenticationOptionsResponse.java # ë¡œê·¸ì¸ ì˜µì…˜ ì‘ë‹µ
â”‚   â””â”€â”€ PasskeyListResponse.java                  # íŒ¨ìŠ¤í‚¤ ëª©ë¡ ì‘ë‹µ
â””â”€â”€ exception/
    â””â”€â”€ PasskeyException.java           # íŒ¨ìŠ¤í‚¤ ì „ìš© ì˜ˆì™¸
```

### í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼ êµ¬ì¡°

```
frontend/src/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ auth.js                # passkeyApi ê°ì²´ (API í˜¸ì¶œ)
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ AuthContext.jsx        # passkeyLogin() í•¨ìˆ˜
â””â”€â”€ pages/
    â”œâ”€â”€ LoginPage.jsx          # íŒ¨ìŠ¤í‚¤ ë¡œê·¸ì¸ ë²„íŠ¼
    â””â”€â”€ DashboardPage.jsx      # íŒ¨ìŠ¤í‚¤ ê´€ë¦¬ UI (ë“±ë¡/ëª©ë¡/ì´ë¦„ë³€ê²½/ì‚­ì œ)
```

### WebAuthn4J ì„¤ì •

```java
private final WebAuthnManager webAuthnManager =
    WebAuthnManager.createNonStrictWebAuthnManager();
```

**Non-strict ëª¨ë“œ**ë¥¼ ì‚¬ìš©í•˜ì—¬ Attestation ê²€ì¦ì„ ì™„í™”í•œë‹¤. Passkey(Resident Key) ì‚¬ìš© ì‹œ ê¸°ê¸° ì¦ëª…(Attestation)ë³´ë‹¤ ì‚¬ìš©ìž ì¸ì¦ì´ ì¤‘ìš”í•˜ë¯€ë¡œ ì í•©í•œ ì„¤ì •ì´ë‹¤.

---

## ë°ì´í„° ëª¨ë¸

### UserPasskey ì—”í‹°í‹° (`tb_user_passkey`)

| ì»¬ëŸ¼ | íƒ€ìž… | ì œì•½ì¡°ê±´ | ì„¤ëª… |
|------|------|----------|------|
| `id` | BIGINT | PK, AUTO_INCREMENT | ê¸°ë³¸ í‚¤ |
| `user_id` | BIGINT | FK â†’ tb_user, NOT NULL | ì‚¬ìš©ìž ì°¸ì¡° |
| `credential_id` | VARCHAR(1024) | UNIQUE, NOT NULL | Base64URL ì¸ì½”ë”©ëœ ìžê²©ì¦ëª… ID |
| `public_key` | BLOB | NOT NULL | ì§ë ¬í™”ëœ AttestedCredentialData |
| `sign_count` | BIGINT | DEFAULT 0 | ì„œëª… ì¹´ìš´í„° (ë³µì œ íƒì§€ìš©) |
| `transports` | VARCHAR(255) | NULLABLE | ì‰¼í‘œ êµ¬ë¶„ ì „ì†¡ ë°©ì‹ (internal, usb, ble, nfc) |
| `device_name` | VARCHAR(100) | NULLABLE | ì‚¬ìš©ìž ì§€ì • ê¸°ê¸° ì´ë¦„ |
| `last_used_at` | DATETIME | NULLABLE | ë§ˆì§€ë§‰ ì‚¬ìš© ì¼ì‹œ |
| `created_at` | DATETIME | AUTO | ë“±ë¡ ì¼ì‹œ |
| `updated_at` | DATETIME | AUTO | ìˆ˜ì • ì¼ì‹œ |

**ì¸ë±ìŠ¤:** `credential_id` (UNIQUE)

### ì—”í‹°í‹° ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `updateSignCount(long signCount)` | ì¸ì¦ í›„ ì„œëª… ì¹´ìš´í„° ê°±ì‹  |
| `recordUsage()` | `lastUsedAt`ì„ í˜„ìž¬ ì‹œê°ìœ¼ë¡œ ê°±ì‹  |
| `updateDeviceName(String deviceName)` | íŒ¨ìŠ¤í‚¤ ì´ë¦„ ë³€ê²½ |

### Repository ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `findByCredentialId(String)` | ìžê²©ì¦ëª… IDë¡œ íŒ¨ìŠ¤í‚¤ ì¡°íšŒ |
| `findByUserId(Long)` | ì‚¬ìš©ìžì˜ ì „ì²´ íŒ¨ìŠ¤í‚¤ ëª©ë¡ |
| `findByCredentialIdWithUser(String)` | íŒ¨ìŠ¤í‚¤ + User JOIN FETCH (ë¡œê·¸ì¸ ì‹œ ì‚¬ìš©) |
| `findByIdAndUserId(Long, Long)` | ì‚¬ìš©ìž ì†Œìœ  íŒ¨ìŠ¤í‚¤ ì¡°íšŒ (ê¶Œí•œ ê²€ì¦) |
| `countByUserId(Long)` | ë“±ë¡ í•œë„ í™•ì¸ |
| `existsByUserId(Long)` | íŒ¨ìŠ¤í‚¤ ì¡´ìž¬ ì—¬ë¶€ (ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ) |
| `deleteByUserId(Long)` | ê³„ì • ì‚­ì œ ì‹œ ì „ì²´ íŒ¨ìŠ¤í‚¤ ì‚­ì œ |

---

## API ì—”ë“œí¬ì¸íŠ¸

### ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

| ë©”ì„œë“œ | ê²½ë¡œ | ì¸ì¦ | ì„¤ëª… |
|--------|------|------|------|
| POST | `/api/v1/passkey/register/options` | í•„ìš” | ë“±ë¡ ì±Œë¦°ì§€ ìƒì„± |
| POST | `/api/v1/passkey/register/verify` | í•„ìš” | ë“±ë¡ ê²€ì¦ ë° ì €ìž¥ |
| POST | `/api/v1/auth/passkey/login/options` | ê³µê°œ | ë¡œê·¸ì¸ ì±Œë¦°ì§€ ìƒì„± |
| POST | `/api/v1/auth/passkey/login/verify` | ê³µê°œ | ë¡œê·¸ì¸ ê²€ì¦ ë° JWT ë°œê¸‰ |
| GET | `/api/v1/passkey/list` | í•„ìš” | íŒ¨ìŠ¤í‚¤ ëª©ë¡ ì¡°íšŒ |
| PATCH | `/api/v1/passkey/{id}` | í•„ìš” | íŒ¨ìŠ¤í‚¤ ì´ë¦„ ë³€ê²½ |
| DELETE | `/api/v1/passkey/{id}` | í•„ìš” | íŒ¨ìŠ¤í‚¤ ì‚­ì œ |

### ë“±ë¡ ì˜µì…˜ ì‘ë‹µ

**POST** `/api/v1/passkey/register/options`

```json
{
  "challenge": "vqrS6WXDe1JUs5_c3i4-Dg",
  "rp": {
    "id": "localhost",
    "name": "Authly"
  },
  "user": {
    "id": "dXVpZC0xMjM0NTY3OA",
    "name": "testuser",
    "displayName": "testuser"
  },
  "pubKeyCredParams": [
    { "type": "public-key", "alg": -7 },
    { "type": "public-key", "alg": -257 }
  ],
  "timeout": 300000,
  "attestation": "none",
  "excludeCredentials": [
    { "id": "ê¸°ì¡´_íŒ¨ìŠ¤í‚¤_credentialId", "type": "public-key" }
  ]
}
```

| í•„ë“œ | ì„¤ëª… |
|------|------|
| `challenge` | Base64URL ì¸ì½”ë”©ëœ 32ë°”ì´íŠ¸ ëžœë¤ ì±Œë¦°ì§€ |
| `rp.id` | Relying Party ID (ë„ë©”ì¸) |
| `rp.name` | Relying Party í‘œì‹œ ì´ë¦„ |
| `user.id` | ì‚¬ìš©ìž UUIDì˜ Base64 ì¸ì½”ë”© |
| `user.name` / `displayName` | ì‚¬ìš©ìž ë‹‰ë„¤ìž„ |
| `pubKeyCredParams` | ì§€ì› ì•Œê³ ë¦¬ì¦˜: ES256(-7), RS256(-257) |
| `timeout` | ì±Œë¦°ì§€ ìœ íš¨ ì‹œê°„ (ë°€ë¦¬ì´ˆ) |
| `attestation` | "none" (ê¸°ê¸° ì¦ëª… ë¶ˆí•„ìš”) |
| `excludeCredentials` | ì´ë¯¸ ë“±ë¡ëœ íŒ¨ìŠ¤í‚¤ ëª©ë¡ (ì¤‘ë³µ ë“±ë¡ ë°©ì§€) |

### ë“±ë¡ ê²€ì¦ ìš”ì²­/ì‘ë‹µ

**POST** `/api/v1/passkey/register/verify`

ìš”ì²­:
```json
{
  "credentialId": "base64url_encoded_credential_id",
  "attestationObject": "base64url_encoded_attestation",
  "clientDataJSON": "base64url_encoded_client_data",
  "transports": "internal,usb",
  "deviceName": "MacBook Pro"
}
```

| í•„ë“œ | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|
| `credentialId` | O | Base64URL ì¸ì½”ë”©ëœ ìžê²©ì¦ëª… ID |
| `attestationObject` | O | Base64URL ì¸ì½”ë”©ëœ Attestation ê°ì²´ |
| `clientDataJSON` | O | Base64URL ì¸ì½”ë”©ëœ í´ë¼ì´ì–¸íŠ¸ ë°ì´í„° |
| `transports` | X | ì‰¼í‘œ êµ¬ë¶„ ì „ì†¡ ë°©ì‹ |
| `deviceName` | X | ê¸°ê¸° ì´ë¦„ (ê¸°ë³¸ê°’: "íŒ¨ìŠ¤í‚¤") |

ì‘ë‹µ:
```json
{
  "message": "íŒ¨ìŠ¤í‚¤ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

### ë¡œê·¸ì¸ ì˜µì…˜ ì‘ë‹µ

**POST** `/api/v1/auth/passkey/login/options`

```json
{
  "challenge": "vqrS6WXDe1JUs5_c3i4-Dg",
  "timeout": 300000,
  "rpId": "localhost",
  "allowCredentials": [],
  "userVerification": "preferred"
}
```

| í•„ë“œ | ì„¤ëª… |
|------|------|
| `allowCredentials` | ë¹ˆ ë°°ì—´ (Discoverable Credentials ì‚¬ìš© â€” ì‚¬ìš©ìžëª… ìž…ë ¥ ë¶ˆí•„ìš”) |
| `userVerification` | "preferred" (ê°€ëŠ¥í•˜ë©´ ì‚¬ìš©ìž ì¸ì¦ ìš”êµ¬) |

### ë¡œê·¸ì¸ ê²€ì¦ ìš”ì²­/ì‘ë‹µ

**POST** `/api/v1/auth/passkey/login/verify`

ìš”ì²­:
```json
{
  "credentialId": "base64url_encoded_credential_id",
  "authenticatorData": "base64url_encoded_auth_data",
  "clientDataJSON": "base64url_encoded_client_data",
  "signature": "base64url_encoded_signature",
  "userHandle": "base64url_encoded_user_handle"
}
```

| í•„ë“œ | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|
| `credentialId` | O | Base64URL ì¸ì½”ë”©ëœ ìžê²©ì¦ëª… ID |
| `authenticatorData` | O | Base64URL ì¸ì½”ë”©ëœ ì¸ì¦ìž ë°ì´í„° |
| `clientDataJSON` | O | Base64URL ì¸ì½”ë”©ëœ í´ë¼ì´ì–¸íŠ¸ ë°ì´í„° |
| `signature` | O | Base64URL ì¸ì½”ë”©ëœ ì„œëª… |
| `userHandle` | X | Base64URL ì¸ì½”ë”©ëœ ì‚¬ìš©ìž í•¸ë“¤ |

ì‘ë‹µ:
```json
{
  "userId": 1,
  "userUuid": "uuid-1234-5678",
  "email": "user@example.com",
  "nickname": "testuser",
  "token": {
    "accessToken": "eyJhbGciOiJIUzI1NiIs...",
    "refreshToken": "eyJhbGciOiJIUzI1NiIs...",
    "expiresIn": 1800000
  },
  "passwordExpired": false,
  "twoFactorRequired": false,
  "pendingDeletion": false
}
```

### íŒ¨ìŠ¤í‚¤ ëª©ë¡ ì‘ë‹µ

**GET** `/api/v1/passkey/list`

```json
{
  "passkeys": [
    {
      "id": 1,
      "deviceName": "MacBook Pro",
      "createdAt": "2025-02-15T10:30:00",
      "lastUsedAt": "2025-02-18T09:15:00"
    },
    {
      "id": 2,
      "deviceName": "iPhone 14",
      "createdAt": "2025-02-16T14:20:00",
      "lastUsedAt": null
    }
  ]
}
```

### íŒ¨ìŠ¤í‚¤ ì´ë¦„ ë³€ê²½

**PATCH** `/api/v1/passkey/{id}`

ìš”ì²­:
```json
{
  "deviceName": "Personal iPhone"
}
```

ì‘ë‹µ:
```json
{
  "message": "íŒ¨ìŠ¤í‚¤ ì´ë¦„ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤"
}
```

### íŒ¨ìŠ¤í‚¤ ì‚­ì œ

**DELETE** `/api/v1/passkey/{id}`

ì‘ë‹µ: `200 OK` (ë¹ˆ ë³¸ë¬¸)

---

## íŒ¨ìŠ¤í‚¤ ë“±ë¡ í”Œë¡œìš°

ì¸ì¦ëœ ì‚¬ìš©ìžë§Œ íŒ¨ìŠ¤í‚¤ë¥¼ ë“±ë¡í•  ìˆ˜ ìžˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚                  â”‚    Backend    â”‚                  â”‚  Redis  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚                                 â”‚                                â”‚
       â”‚  1. POST /passkey/register/     â”‚                                â”‚
       â”‚     options (Bearer JWT)        â”‚                                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  2. ì‚¬ìš©ìž ì¡´ìž¬ í™•ì¸            â”‚
       â”‚                                 â”‚  3. íŒ¨ìŠ¤í‚¤ ìˆ˜ í™•ì¸ (â‰¤ 10)      â”‚
       â”‚                                 â”‚  4. 32ë°”ì´íŠ¸ ëžœë¤ ì±Œë¦°ì§€ ìƒì„±   â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  5. SET passkey:challenge:     â”‚
       â”‚                                 â”‚     register:{userId}          â”‚
       â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                 â”‚     TTL: 300ì´ˆ                 â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  <â”€â”€ RegistrationOptions ì‘ë‹µ   â”‚                                â”‚
       â”‚      (challenge, rp, user,      â”‚                                â”‚
       â”‚       pubKeyCredParams,         â”‚                                â”‚
       â”‚       excludeCredentials)       â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  6. navigator.credentials.      â”‚                                â”‚
       â”‚     create(publicKey)           â”‚                                â”‚
       â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                                â”‚
       â”‚     â”‚ ì‚¬ìš©ìž ì¸ì¦ ìˆ˜í–‰  â”‚        â”‚                                â”‚
       â”‚     â”‚ (Touch ID, Face  â”‚        â”‚                                â”‚
       â”‚     â”‚  ID, PIN ë“±)     â”‚        â”‚                                â”‚
       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  7. POST /passkey/register/     â”‚                                â”‚
       â”‚     verify (Bearer JWT)         â”‚                                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
       â”‚     {credentialId,              â”‚                                â”‚
       â”‚      attestationObject,         â”‚  8. GETDEL passkey:challenge:  â”‚
       â”‚      clientDataJSON,            â”‚     register:{userId}          â”‚
       â”‚      transports, deviceName}    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                 â”‚  <â”€â”€ ì±Œë¦°ì§€ ë°˜í™˜ (ì¼íšŒì„± ì†Œëª¨)  â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  9. WebAuthn4J ê²€ì¦:           â”‚
       â”‚                                 â”‚     - ì±Œë¦°ì§€ ì¼ì¹˜ í™•ì¸          â”‚
       â”‚                                 â”‚     - Origin ê²€ì¦              â”‚
       â”‚                                 â”‚     - RP ID ê²€ì¦               â”‚
       â”‚                                 â”‚     - Attestation ê²€ì¦         â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  10. ê³µê°œí‚¤ ì§ë ¬í™” ë° ì €ìž¥      â”‚
       â”‚                                 â”‚      (AttestedCredentialData)  â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  11. credentialId ì¤‘ë³µ í™•ì¸     â”‚
       â”‚                                 â”‚  12. UserPasskey DB ì €ìž¥       â”‚
       â”‚                                 â”‚  13. securityDashboard ìºì‹œ    â”‚
       â”‚                                 â”‚      ë¬´íš¨í™”                     â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  <â”€â”€ 200 OK                     â”‚                                â”‚
       â”‚      "íŒ¨ìŠ¤í‚¤ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤"    â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
```

### í”„ë¡ íŠ¸ì—”ë“œ ë“±ë¡ ì½”ë“œ í•µì‹¬ ë¡œì§

```javascript
// 1. ì„œë²„ì—ì„œ ë“±ë¡ ì˜µì…˜ ìˆ˜ì‹ 
const { data: options } = await passkeyApi.getRegistrationOptions();

// 2. Base64URL â†’ ArrayBuffer ë³€í™˜
const challengeBuffer = base64UrlToBuffer(options.challenge);
const userIdBuffer = base64UrlToBuffer(options.user.id);

// 3. ë¸Œë¼ìš°ì € WebAuthn API í˜¸ì¶œ
const credential = await navigator.credentials.create({
  publicKey: {
    challenge: challengeBuffer,
    rp: options.rp,
    user: { ...options.user, id: userIdBuffer },
    pubKeyCredParams: options.pubKeyCredParams,
    timeout: options.timeout,
    attestation: options.attestation,
    excludeCredentials: options.excludeCredentials.map(c => ({
      ...c, id: base64UrlToBuffer(c.id)
    }))
  }
});

// 4. ì‘ë‹µì„ Base64URLë¡œ ì¸ì½”ë”©í•˜ì—¬ ì„œë²„ì— ì „ì†¡
await passkeyApi.verifyRegistration({
  credentialId: arrayBufferToBase64Url(credential.rawId),
  attestationObject: arrayBufferToBase64Url(credential.response.attestationObject),
  clientDataJSON: arrayBufferToBase64Url(credential.response.clientDataJSON),
  transports: credential.response.getTransports?.().join(','),
  deviceName: passkeyName || 'íŒ¨ìŠ¤í‚¤'
});
```

---

## íŒ¨ìŠ¤í‚¤ ë¡œê·¸ì¸ í”Œë¡œìš°

ê³µê°œ ì—”ë“œí¬ì¸íŠ¸ì´ë©° ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•Šë‹¤. Discoverable Credentialsë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ì‚¬ìš©ìžëª… ìž…ë ¥ ì—†ì´ ë¡œê·¸ì¸ ê°€ëŠ¥í•˜ë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚                  â”‚    Backend    â”‚                  â”‚  Redis  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚                                 â”‚                                â”‚
       â”‚  1. POST /auth/passkey/         â”‚                                â”‚
       â”‚     login/options               â”‚                                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  2. 32ë°”ì´íŠ¸ ëžœë¤ ì±Œë¦°ì§€ ìƒì„±   â”‚
       â”‚                                 â”‚  3. UUID sessionId ìƒì„±        â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  4. SET passkey:challenge:     â”‚
       â”‚                                 â”‚     login:{sessionId}          â”‚
       â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                 â”‚     TTL: 300ì´ˆ                 â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  <â”€â”€ AuthenticationOptions ì‘ë‹µ â”‚                                â”‚
       â”‚      (challenge, rpId,          â”‚                                â”‚
       â”‚       allowCredentials: [],     â”‚                                â”‚
       â”‚       userVerification)         â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  5. navigator.credentials.      â”‚                                â”‚
       â”‚     get(publicKey)              â”‚                                â”‚
       â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                                â”‚
       â”‚     â”‚ ë¸Œë¼ìš°ì €ê°€ ì €ìž¥ëœ     â”‚    â”‚                                â”‚
       â”‚     â”‚ íŒ¨ìŠ¤í‚¤ ëª©ë¡ í‘œì‹œ     â”‚    â”‚                                â”‚
       â”‚     â”‚ ì‚¬ìš©ìžê°€ ì„ íƒ í›„     â”‚    â”‚                                â”‚
       â”‚     â”‚ ìƒì²´ ì¸ì¦ ìˆ˜í–‰       â”‚    â”‚                                â”‚
       â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  6. POST /auth/passkey/         â”‚                                â”‚
       â”‚     login/verify                â”‚                                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
       â”‚     {credentialId,              â”‚                                â”‚
       â”‚      authenticatorData,         â”‚  7. credentialIdë¡œ íŒ¨ìŠ¤í‚¤ ì¡°íšŒ  â”‚
       â”‚      clientDataJSON,            â”‚     (User JOIN FETCH)          â”‚
       â”‚      signature}                 â”‚                                â”‚
       â”‚                                 â”‚  8. SCAN passkey:challenge:    â”‚
       â”‚                                 â”‚     login:* â†’ ì¼ì¹˜ í•­ëª© ì†Œëª¨   â”‚
       â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                 â”‚  <â”€â”€ ì±Œë¦°ì§€ ë°˜í™˜               â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  9. WebAuthn4J ê²€ì¦:           â”‚
       â”‚                                 â”‚     - ì±Œë¦°ì§€ ì¼ì¹˜ í™•ì¸          â”‚
       â”‚                                 â”‚     - Origin ê²€ì¦              â”‚
       â”‚                                 â”‚     - RP ID ê²€ì¦               â”‚
       â”‚                                 â”‚     - ì„œëª… ê²€ì¦ (ê³µê°œí‚¤)       â”‚
       â”‚                                 â”‚     - signCount ê²€ì¦           â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  10. íŒ¨ìŠ¤í‚¤ ì •ë³´ ê°±ì‹ :          â”‚
       â”‚                                 â”‚      - signCount ì¦ê°€          â”‚
       â”‚                                 â”‚      - lastUsedAt ê°±ì‹          â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  11. JWT í† í° ë°œê¸‰:            â”‚
       â”‚                                 â”‚      - accessToken (30ë¶„)      â”‚
       â”‚                                 â”‚      - refreshToken (14ì¼)     â”‚
       â”‚                                 â”‚                                â”‚
       â”‚                                 â”‚  12. Redisì— í† í° ì €ìž¥:        â”‚
       â”‚                                 â”‚      refresh:{userId}:{tokenId}â”‚
       â”‚                                 â”‚      session:{userId}:{tokenId}â”‚
       â”‚                                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
       â”‚                                 â”‚                                â”‚
       â”‚  <â”€â”€ LoginResponse              â”‚                                â”‚
       â”‚      {userId, userUuid, email,  â”‚                                â”‚
       â”‚       nickname, token: {        â”‚                                â”‚
       â”‚         accessToken,            â”‚                                â”‚
       â”‚         refreshToken,           â”‚                                â”‚
       â”‚         expiresIn}}             â”‚                                â”‚
       â”‚                                 â”‚                                â”‚
```

### í”„ë¡ íŠ¸ì—”ë“œ ë¡œê·¸ì¸ ì½”ë“œ í•µì‹¬ ë¡œì§

```javascript
// 1. ì„œë²„ì—ì„œ ë¡œê·¸ì¸ ì˜µì…˜ ìˆ˜ì‹ 
const { data: options } = await passkeyApi.getAuthenticationOptions();

// 2. ë¸Œë¼ìš°ì € WebAuthn API í˜¸ì¶œ (íŒ¨ìŠ¤í‚¤ ì„ íƒ UI í‘œì‹œ)
const credential = await navigator.credentials.get({
  publicKey: {
    challenge: base64UrlToBuffer(options.challenge),
    timeout: options.timeout,
    rpId: options.rpId,
    userVerification: 'preferred',
    allowCredentials: []  // Discoverable â€” ì‚¬ìš©ìžëª… ë¶ˆí•„ìš”
  }
});

// 3. ì‘ë‹µì„ Base64URLë¡œ ì¸ì½”ë”©í•˜ì—¬ ì„œë²„ì— ì „ì†¡
const { data } = await passkeyApi.verifyAuthentication({
  credentialId: arrayBufferToBase64Url(credential.rawId),
  authenticatorData: arrayBufferToBase64Url(credential.response.authenticatorData),
  clientDataJSON: arrayBufferToBase64Url(credential.response.clientDataJSON),
  signature: arrayBufferToBase64Url(credential.response.signature),
  userHandle: credential.response.userHandle
    ? arrayBufferToBase64Url(credential.response.userHandle)
    : undefined
});

// 4. JWT í† í° ì €ìž¥ ë° í”„ë¡œí•„ ë¡œë“œ
localStorage.setItem('accessToken', data.token.accessToken);
```

### Discoverable Credentials ë°©ì‹

ë¡œê·¸ì¸ ì‹œ `allowCredentials`ë¥¼ ë¹ˆ ë°°ì—´ë¡œ ì „ë‹¬í•˜ì—¬ **Discoverable Credentials** ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. ì´ ë°©ì‹ì—ì„œëŠ”:

1. ì„œë²„ê°€ íŠ¹ì • ìžê²©ì¦ëª…ì„ ì§€ì •í•˜ì§€ ì•ŠìŒ
2. ë¸Œë¼ìš°ì €/OSê°€ í•´ë‹¹ RP IDì— ë“±ë¡ëœ ëª¨ë“  íŒ¨ìŠ¤í‚¤ë¥¼ í‘œì‹œ
3. ì‚¬ìš©ìžê°€ ì›í•˜ëŠ” íŒ¨ìŠ¤í‚¤ë¥¼ ì„ íƒ
4. ì‚¬ìš©ìžëª… ìž…ë ¥ ì—†ì´ ì¸ì¦ ì™„ë£Œ

---

## íŒ¨ìŠ¤í‚¤ ê´€ë¦¬

### ëª©ë¡ ì¡°íšŒ

```
GET /api/v1/passkey/list
Authorization: Bearer {accessToken}
```

ì‚¬ìš©ìžì˜ ëª¨ë“  íŒ¨ìŠ¤í‚¤ë¥¼ ë°˜í™˜í•œë‹¤. ê° íŒ¨ìŠ¤í‚¤ì—ëŠ” ID, ê¸°ê¸° ì´ë¦„, ë“±ë¡ì¼, ë§ˆì§€ë§‰ ì‚¬ìš©ì¼ì´ í¬í•¨ëœë‹¤.

### ì´ë¦„ ë³€ê²½

```
PATCH /api/v1/passkey/{id}
Authorization: Bearer {accessToken}

{ "deviceName": "ìƒˆ ì´ë¦„" }
```

ì‚¬ìš©ìž ì†Œìœ  í™•ì¸ í›„ ê¸°ê¸° ì´ë¦„ì„ ë³€ê²½í•œë‹¤. ì´ë¦„ì€ ìµœëŒ€ 100ìžì´ë‹¤.

### ì‚­ì œ

```
DELETE /api/v1/passkey/{id}
Authorization: Bearer {accessToken}
```

ì‚¬ìš©ìž ì†Œìœ  í™•ì¸ í›„ íŒ¨ìŠ¤í‚¤ë¥¼ ì‚­ì œí•œë‹¤. ì‚­ì œ í›„ ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ ìºì‹œê°€ ë¬´íš¨í™”ëœë‹¤.

---

## Redis ì±Œë¦°ì§€ ì €ìž¥ì†Œ

### í‚¤ íŒ¨í„´

| í‚¤ íŒ¨í„´ | TTL | ê°’ | ìš©ë„ |
|---------|-----|-----|------|
| `passkey:challenge:register:{userId}` | 300ì´ˆ (5ë¶„) | Base64URL ì±Œë¦°ì§€ ë¬¸ìžì—´ | íŒ¨ìŠ¤í‚¤ ë“±ë¡ (ì¸ì¦ í•„ìš”) |
| `passkey:challenge:login:{sessionId}` | 300ì´ˆ (5ë¶„) | Base64URL ì±Œë¦°ì§€ ë¬¸ìžì—´ | íŒ¨ìŠ¤í‚¤ ë¡œê·¸ì¸ (ê³µê°œ, ëžœë¤ UUID sessionId) |

### ë³´ì•ˆ íŠ¹ì„±

- **ì¼íšŒì„± ì‚¬ìš©**: ì±Œë¦°ì§€ëŠ” ê²€ì¦ ì‹œ ì¦‰ì‹œ ì‚­ì œ (GETDEL)í•˜ì—¬ ìž¬ì‚¬ìš© ë°©ì§€
- **TTL ìžë™ ë§Œë£Œ**: 5ë¶„ í›„ ìžë™ ì‚­ì œ
- **ì•”í˜¸í•™ì  ëžœë¤**: `SecureRandom`ìœ¼ë¡œ 32ë°”ì´íŠ¸ ìƒì„±
- **ë¡œê·¸ì¸ ì±Œë¦°ì§€ ìŠ¤ìº”**: Discoverable Credentialsì—ì„œëŠ” ì„œë²„ê°€ sessionIdë¥¼ ë¯¸ë¦¬ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, `passkey:challenge:login:*` íŒ¨í„´ì„ SCANí•˜ì—¬ ì¼ì¹˜í•˜ëŠ” ì²« ë²ˆì§¸ ì±Œë¦°ì§€ë¥¼ ì†Œëª¨

---

## ë³´ì•ˆ ì„¤ê³„

### ê²€ì¦ í•­ëª©

| ê²€ì¦ | ì„¤ëª… |
|------|------|
| ì±Œë¦°ì§€ ê²€ì¦ | ì„œë²„ì—ì„œ ë°œê¸‰í•œ ì±Œë¦°ì§€ì™€ í´ë¼ì´ì–¸íŠ¸ ì‘ë‹µì˜ ì±Œë¦°ì§€ ì¼ì¹˜ í™•ì¸ |
| Origin ê²€ì¦ | `clientDataJSON`ì˜ originì´ ì„¤ì •ëœ originê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ |
| RP ID ê²€ì¦ | `authenticatorData`ì˜ RP ID í•´ì‹œê°€ ì„¤ì •ëœ RP IDì™€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸ |
| ì„œëª… ê²€ì¦ | ì €ìž¥ëœ ê³µê°œí‚¤ë¡œ ì„œëª…ì˜ ìœ íš¨ì„± ê²€ì¦ |
| Sign Count ì¶”ì  | ì¸ì¦ìžì˜ ì„œëª… ì¹´ìš´í„°ê°€ ë‹¨ì¡° ì¦ê°€í•˜ëŠ”ì§€ í™•ì¸ (ë³µì œ íƒì§€) |
| ìžê²©ì¦ëª… ê³ ìœ ì„± | ë™ì¼í•œ credentialIdì˜ ì¤‘ë³µ ë“±ë¡ ë°©ì§€ |
| ì‚¬ìš©ìž ì†Œìœ ê¶Œ | ê´€ë¦¬ ìž‘ì—…(ì‚­ì œ, ì´ë¦„ë³€ê²½) ì‹œ `userId` ì¼ì¹˜ í™•ì¸ |
| ë“±ë¡ í•œë„ | ì‚¬ìš©ìžë‹¹ ìµœëŒ€ 10ê°œë¡œ ì œí•œ |

### ì§€ì› ì•Œê³ ë¦¬ì¦˜

| ì•Œê³ ë¦¬ì¦˜ | COSE ID | ì„¤ëª… |
|----------|---------|------|
| ES256 | -7 | ECDSA with SHA-256 (ìš°ì„ ) |
| RS256 | -257 | RSA with SHA-256 (ëŒ€ì²´) |

### Attestation ì •ì±…

`"none"` â€” ê¸°ê¸° ì¦ëª…ì„ ìš”êµ¬í•˜ì§€ ì•ŠëŠ”ë‹¤. íŒ¨ìŠ¤í‚¤ ë°©ì‹ì—ì„œëŠ” í•˜ë“œì›¨ì–´ ì¸ì¦ë³´ë‹¤ ì‚¬ìš© íŽ¸ì˜ì„±ì´ ì¤‘ìš”í•˜ë©°, ëŒ€ë¶€ë¶„ì˜ í”Œëž«í¼ ì¸ì¦ìž(Touch ID, Windows Hello ë“±)ê°€ ì´ ë°©ì‹ê³¼ í˜¸í™˜ëœë‹¤.

### ë³´ì•ˆ í•„í„° ì²´ì¸ì—ì„œì˜ ìœ„ì¹˜

íŒ¨ìŠ¤í‚¤ ê´€ë ¨ ì—”ë“œí¬ì¸íŠ¸ëŠ” ê¸°ì¡´ ë³´ì•ˆ í•„í„° ì²´ì¸ ë‚´ì—ì„œ ë™ìž‘í•œë‹¤:

1. `SecurityHeadersFilter` â€” XSS/í´ë¦­ìž¬í‚¹ ë°©ì§€ í—¤ë” ì¶”ê°€
2. `RateLimitFilter` â€” IPë³„ ìš”ì²­ ì œí•œ ì ìš©
3. `RequestLoggingFilter` â€” ìš”ì²­ ë¡œê¹…
4. `JwtAuthenticationFilter` â€” ê´€ë¦¬ ì—”ë“œí¬ì¸íŠ¸ì˜ Bearer í† í° ê²€ì¦

ê³µê°œ ì—”ë“œí¬ì¸íŠ¸(`/api/v1/auth/passkey/**`)ëŠ” JWT ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥í•˜ë©°, ê´€ë¦¬ ì—”ë“œí¬ì¸íŠ¸(`/api/v1/passkey/**`)ëŠ” ìœ íš¨í•œ JWT í† í°ì´ í•„ìš”í•˜ë‹¤.

---

## ì—ëŸ¬ ì²˜ë¦¬

### ë°±ì—”ë“œ ì—ëŸ¬ ì½”ë“œ

| íŒ©í† ë¦¬ ë©”ì„œë“œ | ì—ëŸ¬ ì½”ë“œ | ë©”ì‹œì§€ | HTTP ìƒíƒœ |
|---------------|-----------|--------|-----------|
| `notFound()` | `PASSKEY_NOT_FOUND` | íŒ¨ìŠ¤í‚¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | 404 |
| `invalidChallenge()` | `PASSKEY_INVALID_CHALLENGE` | ìœ íš¨í•˜ì§€ ì•Šì€ ì±Œë¦°ì§€ìž…ë‹ˆë‹¤ | 400 |
| `verificationFailed()` | `PASSKEY_VERIFICATION_FAILED` | íŒ¨ìŠ¤í‚¤ ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ | 400 |
| `registrationFailed()` | `PASSKEY_REGISTRATION_FAILED` | íŒ¨ìŠ¤í‚¤ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤ | 400 |
| `alreadyRegistered()` | `PASSKEY_ALREADY_REGISTERED` | ì´ë¯¸ ë“±ë¡ëœ íŒ¨ìŠ¤í‚¤ìž…ë‹ˆë‹¤ | 409 |
| `limitExceeded()` | `PASSKEY_LIMIT_EXCEEDED` | íŒ¨ìŠ¤í‚¤ ë“±ë¡ í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤ (ìµœëŒ€ 10ê°œ) | 400 |
| `userNotFound()` | `PASSKEY_USER_NOT_FOUND` | ì‚¬ìš©ìžë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤ | 404 |

ëª¨ë“  ì—ëŸ¬ëŠ” `PasskeyException`(`BusinessException` í™•ìž¥)ìœ¼ë¡œ ë°œìƒí•˜ë©°, `GlobalExceptionHandler`ê°€ í‘œì¤€ ì‘ë‹µ í˜•ì‹ìœ¼ë¡œ ëž˜í•‘í•œë‹¤:

```json
{
  "success": false,
  "error": {
    "code": "PASSKEY_VERIFICATION_FAILED",
    "message": "íŒ¨ìŠ¤í‚¤ ì¸ì¦ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤"
  },
  "timestamp": "2025-02-18T12:34:56"
}
```

### í”„ë¡ íŠ¸ì—”ë“œ ì—ëŸ¬ ì²˜ë¦¬

| ìƒí™© | ì²˜ë¦¬ |
|------|------|
| ë¸Œë¼ìš°ì € ë¯¸ì§€ì› | `window.PublicKeyCredential` ì²´í¬ â†’ "ì´ ë¸Œë¼ìš°ì €ëŠ” íŒ¨ìŠ¤í‚¤ë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤" |
| ë“±ë¡ ì·¨ì†Œ (ì‚¬ìš©ìž) | `NotAllowedError` â†’ "íŒ¨ìŠ¤í‚¤ ë“±ë¡ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤" |
| ë¡œê·¸ì¸ ì·¨ì†Œ (ì‚¬ìš©ìž) | `NotAllowedError` â†’ "íŒ¨ìŠ¤í‚¤ ì¸ì¦ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤" |
| ë“±ë¡ í•œë„ ì´ˆê³¼ | ì„œë²„ ì—ëŸ¬ ì½”ë“œ í‘œì‹œ |
| ê¸°íƒ€ ì—ëŸ¬ | ì„œë²„ ë©”ì‹œì§€ ë˜ëŠ” ê¸°ë³¸ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ |

---

## í”„ë¡ íŠ¸ì—”ë“œ UI

### ë¡œê·¸ì¸ íŽ˜ì´ì§€

íŒ¨ìŠ¤í‚¤ ì§€ì› ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ íŽ˜ì´ì§€ ìƒë‹¨ì— íŒ¨ìŠ¤í‚¤ ë¡œê·¸ì¸ ë²„íŠ¼ì´ í‘œì‹œëœë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Authly                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ”‘ íŒ¨ìŠ¤í‚¤ë¡œ ë¡œê·¸ì¸           â”‚  â”‚  â† WebAuthn ì§€ì› ì‹œì—ë§Œ í‘œì‹œ
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ë˜ëŠ” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âœ‰ Emailë¡œ ë¡œê·¸ì¸             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  G Googleë¡œ ë¡œê·¸ì¸            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ðŸ’¬ ì¹´ì¹´ì˜¤ë¡œ ë¡œê·¸ì¸           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  N ë„¤ì´ë²„ë¡œ ë¡œê·¸ì¸            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ëŒ€ì‹œë³´ë“œ â€” ë³´ì•ˆ íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ðŸ”‘ íŒ¨ìŠ¤í‚¤ (Passkey)                        â”‚
â”‚     [2ê°œ ë“±ë¡ë¨]                    [ê´€ë¦¬]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### íŒ¨ìŠ¤í‚¤ ê´€ë¦¬ ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  íŒ¨ìŠ¤í‚¤ ê´€ë¦¬                                    [X]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  íŒ¨ìŠ¤í‚¤ë¥¼ ë“±ë¡í•˜ë©´ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ìƒì²´ì¸ì¦(ì§€ë¬¸,      â”‚
â”‚  ì–¼êµ´)ìœ¼ë¡œ ë¡œê·¸ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.                     â”‚
â”‚                                                      â”‚
â”‚  íŒ¨ìŠ¤í‚¤ ì´ë¦„ (ì„ íƒ)                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ì˜ˆ: MacBook Pro        â”‚  â”‚ìƒˆ íŒ¨ìŠ¤í‚¤ ë“±ë¡ â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ”‘ MacBook Pro                [ì´ë¦„ë³€ê²½][ì‚­ì œ]â”‚   â”‚
â”‚  â”‚    ë“±ë¡: 2025/02/15 Â· ë§ˆì§€ë§‰ ì‚¬ìš©: 2025/02/18â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ðŸ”‘ iPhone 14                  [ì´ë¦„ë³€ê²½][ì‚­ì œ]â”‚   â”‚
â”‚  â”‚    ë“±ë¡: 2025/02/16 Â· ë§ˆì§€ë§‰ ì‚¬ìš©: -          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                      â”‚
â”‚                                         [ë‹«ê¸°]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì´ë¦„ ë³€ê²½ ëª¨ë“œ (ì¸ë¼ì¸)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”‘ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  [ì €ìž¥] [ì·¨ì†Œ]         â”‚
â”‚    â”‚ Personal iPhone â”‚                       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚    ë“±ë¡: 2025/02/16                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ ì—°ë™

íŒ¨ìŠ¤í‚¤ ë“±ë¡ ìƒíƒœëŠ” ë³´ì•ˆ ëŒ€ì‹œë³´ë“œ ì ìˆ˜ì— ë°˜ì˜ëœë‹¤.

| ìš”ì†Œ | ì¡°ê±´ | ì ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `PASSKEY_REGISTERED` | 1ê°œ ì´ìƒ ë“±ë¡ | 15ì  | "íŒ¨ìŠ¤í‚¤ ë“±ë¡" |

ë¯¸ë“±ë¡ ì‹œ ê¶Œìž¥ ì‚¬í•­: "íŒ¨ìŠ¤í‚¤ë¥¼ ë“±ë¡í•˜ë©´ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì•ˆì „í•˜ê²Œ ë¡œê·¸ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤."

íŒ¨ìŠ¤í‚¤ ë“±ë¡/ì‚­ì œ ì‹œ `@CacheEvict(value = "securityDashboard", key = "#userId")`ë¡œ ìºì‹œê°€ ìžë™ ë¬´íš¨í™”ëœë‹¤.

---

## í…ŒìŠ¤íŠ¸

### ì„œë¹„ìŠ¤ í…ŒìŠ¤íŠ¸ (`PasskeyServiceTest.java`)

```java
@ExtendWith(MockitoExtension.class)
class PasskeyServiceTest {
    @InjectMocks private PasskeyService passkeyService;
    @Mock private UserPasskeyRepository userPasskeyRepository;
    @Mock private UserRepository userRepository;
    @Mock private StringRedisTemplate redisTemplate;
    // ...
}
```

| í…ŒìŠ¤íŠ¸ ê·¸ë£¹ | í…ŒìŠ¤íŠ¸ í•­ëª© |
|-------------|------------|
| ë“±ë¡ ì˜µì…˜ ìƒì„± | ì„±ê³µ, ì‚¬ìš©ìž ë¯¸ì¡´ìž¬, í•œë„ ì´ˆê³¼ |
| ì¸ì¦ ì˜µì…˜ ìƒì„± | ì„±ê³µ (ëžœë¤ ìƒì„± í™•ì¸) |
| íŒ¨ìŠ¤í‚¤ ëª©ë¡ | ì„±ê³µ, ë¹ˆ ëª©ë¡ |
| íŒ¨ìŠ¤í‚¤ ì‚­ì œ | ì„±ê³µ, ë¯¸ì¡´ìž¬ |
| íŒ¨ìŠ¤í‚¤ ì´ë¦„ ë³€ê²½ | ì„±ê³µ, ë¯¸ì¡´ìž¬ |
| íŒ¨ìŠ¤í‚¤ ì¡´ìž¬ í™•ì¸ | true, false |

### ì»¨íŠ¸ë¡¤ëŸ¬ í…ŒìŠ¤íŠ¸ (`PasskeyControllerTest.java`)

```java
@WebMvcTest(PasskeyController.class)
@AutoConfigureMockMvc(addFilters = false)
class PasskeyControllerTest {
    @Autowired private MockMvc mockMvc;
    @MockitoBean private PasskeyService passkeyService;
    // ...
}
```

| í…ŒìŠ¤íŠ¸ ê·¸ë£¹ | ê²€ì¦ í•­ëª© |
|-------------|----------|
| ë“±ë¡ ì˜µì…˜ ì¡°íšŒ | 200 OK, ì˜µì…˜ ì‘ë‹µ êµ¬ì¡° |
| ë“±ë¡ ê²€ì¦ | 200 OK, ì„±ê³µ ë©”ì‹œì§€ |
| ë¡œê·¸ì¸ ì˜µì…˜ ì¡°íšŒ | 200 OK, ì±Œë¦°ì§€ ì‘ë‹µ (ê³µê°œ) |
| ë¡œê·¸ì¸ ê²€ì¦ | 200 OK, LoginResponse (ê³µê°œ) |
| íŒ¨ìŠ¤í‚¤ ëª©ë¡ | 200 OK, ëª©ë¡ êµ¬ì¡° |
| íŒ¨ìŠ¤í‚¤ ì´ë¦„ ë³€ê²½ | 200 OK, ì„±ê³µ ë©”ì‹œì§€ |
| íŒ¨ìŠ¤í‚¤ ì‚­ì œ | 200 OK |

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# íŒ¨ìŠ¤í‚¤ ê´€ë ¨ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
./gradlew test --tests "com.jay.auth.service.PasskeyServiceTest"
./gradlew test --tests "com.jay.auth.controller.PasskeyControllerTest"

# ì „ì²´ í…ŒìŠ¤íŠ¸
./gradlew test
```

---

## í™˜ê²½ ë³€ìˆ˜

| ë³€ìˆ˜ | ê¸°ë³¸ê°’ | í•„ìˆ˜ | ì„¤ëª… |
|------|--------|------|------|
| `WEBAUTHN_RP_ID` | `localhost` | X | Relying Party ID (ë„ë©”ì¸ëª…) |
| `WEBAUTHN_RP_NAME` | `Authly` | X | Relying Party í‘œì‹œ ì´ë¦„ |
| `WEBAUTHN_ORIGIN` | `http://localhost:3000` | X | í—ˆìš©ë˜ëŠ” Origin |

`application.yml` ì„¤ì •:

```yaml
app:
  webauthn:
    rp-id: ${WEBAUTHN_RP_ID:localhost}
    rp-name: ${WEBAUTHN_RP_NAME:Authly}
    origin: ${WEBAUTHN_ORIGIN:http://localhost:3000}
```

---

## ë°°í¬ ê°€ì´ë“œ

### ìš´ì˜ í™˜ê²½ ì„¤ì •

ìš´ì˜ í™˜ê²½ì—ì„œëŠ” ë°˜ë“œì‹œ ì‹¤ì œ ë„ë©”ì¸ì— ë§žê²Œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•´ì•¼ í•œë‹¤:

```bash
export WEBAUTHN_RP_ID=example.com
export WEBAUTHN_RP_NAME="Authly"
export WEBAUTHN_ORIGIN=https://example.com
```

### ì£¼ì˜ ì‚¬í•­

1. **RP IDëŠ” ë„ë©”ì¸ê³¼ ì¼ì¹˜í•´ì•¼ í•œë‹¤**: `WEBAUTHN_RP_ID`ëŠ” ì„œë¹„ìŠ¤ê°€ í˜¸ìŠ¤íŒ…ë˜ëŠ” ë„ë©”ì¸ ë˜ëŠ” ìƒìœ„ ë„ë©”ì¸ì´ì–´ì•¼ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `auth.example.com`ì—ì„œ í˜¸ìŠ¤íŒ…ë˜ë©´ `example.com` ë˜ëŠ” `auth.example.com`ìœ¼ë¡œ ì„¤ì •í•  ìˆ˜ ìžˆë‹¤.

2. **Originì€ ì •í™•í•´ì•¼ í•œë‹¤**: í”„ë¡œí† ì½œ(`https://`)ê³¼ ë„ë©”ì¸ì´ ì •í™•ížˆ ì¼ì¹˜í•´ì•¼ í•œë‹¤. í¬íŠ¸ê°€ ê¸°ë³¸ í¬íŠ¸(443)ê°€ ì•„ë‹Œ ê²½ìš° í¬íŠ¸ë„ í¬í•¨í•´ì•¼ í•œë‹¤.

3. **HTTPS í•„ìˆ˜**: ìš´ì˜ í™˜ê²½ì—ì„œ WebAuthnì€ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸(HTTPS)ì—ì„œë§Œ ë™ìž‘í•œë‹¤. `localhost`ëŠ” ì˜ˆì™¸ë¡œ HTTPì—ì„œë„ í—ˆìš©ëœë‹¤.

4. **RP ID ë³€ê²½ ë¶ˆê°€**: í•œë²ˆ ë“±ë¡ëœ íŒ¨ìŠ¤í‚¤ëŠ” í•´ë‹¹ RP IDì— ë°”ì¸ë”©ëœë‹¤. RP IDë¥¼ ë³€ê²½í•˜ë©´ ê¸°ì¡´ íŒ¨ìŠ¤í‚¤ê°€ ëª¨ë‘ ë¬´íš¨í™”ë˜ë¯€ë¡œ ì´ˆê¸° ì„¤ì •ì— ì£¼ì˜í•´ì•¼ í•œë‹¤.

5. **Redis í•„ìˆ˜**: ì±Œë¦°ì§€ ì €ìž¥ì— Redisë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ Redisê°€ ê°€ìš© ìƒíƒœì—¬ì•¼ í•œë‹¤.

### ë¸Œë¼ìš°ì € í˜¸í™˜ì„±

WebAuthn/PasskeyëŠ” ë‹¤ìŒ ë¸Œë¼ìš°ì €ì—ì„œ ì§€ì›ëœë‹¤:

| ë¸Œë¼ìš°ì € | ìµœì†Œ ë²„ì „ | Passkey ì§€ì› |
|----------|-----------|-------------|
| Chrome | 67+ | 109+ |
| Safari | 13+ | 16+ |
| Firefox | 60+ | 122+ |
| Edge | 18+ | 109+ |

ë¯¸ì§€ì› ë¸Œë¼ìš°ì €ì—ì„œëŠ” `window.PublicKeyCredential` ì²´í¬ë¥¼ í†µí•´ íŒ¨ìŠ¤í‚¤ ë¡œê·¸ì¸ ë²„íŠ¼ì´ ìžë™ìœ¼ë¡œ ìˆ¨ê²¨ì§„ë‹¤.
